\documentclass{tufte-handout}
\usepackage{tikz}
%\usepackage{}
\usepackage{mathtools}

\def\salta{\vspace{2cm}}

\usetikzlibrary{shapes,arrows,matrix,fit,positioning,decorations.pathreplacing}
% Diagrams styles
\tikzstyle{block} = [draw=black, rectangle, minimum height=2.5em, minimum width=2em]
\tikzstyle{sum} = [draw=black, circle]
\tikzstyle{gain} = [draw=black, regular polygon, regular polygon sides=3, regular polygon rotate=90, minimum height=2.5em, minimum width=2em]
\tikzstyle{input} = [coordinate]
\tikzstyle{output} = [coordinate]
\tikzstyle{pinstyle} = [pin edge={to-,thin,black}]


\newcommand{\fromworkspace}[3]{%
	\node [block, draw=white,#3, minimum height=1.5em] (#1) {#2};%
	\coordinate [at=(#1.east), xshift=5] (#1_out);%
	\draw (#1.north west) -- (#1.north east) -- (#1_out) -- (#1.south east) -- (#1.south west) -- cycle;%
}
\newcommand{\toworkspace}[3]{%
	\node [block, draw=white,#3] (#1) {#2};%
	\coordinate [at=(#1.west), xshift=-5] (#1_in);%
	\draw (#1.north west) -- (#1.north east) --  (#1.south east) -- (#1.south west) -- (#1_in) -- cycle;%
}
\newcommand{\inputpin}[3]{%
	\node [circle, draw, text width=0.5cm,align=center,#3] (#1) {#2};%
	\coordinate [at=(#1.center), xshift=0.75cm] (#1_out);%
	\draw (#1.north east) -- (#1_out) -- (#1.south east);%
}
\newcommand{\outputpin}[3]{%
	\node [circle, draw, text width=0.5cm,align=center,#3] (#1) {#2};%
	\coordinate [at=(#1.center), xshift=-0.75cm] (#1_in);%
	\draw (#1.north west) -- (#1_in) -- (#1.south west);%
}

\begin{document}

proviamo un pochino di testo \tikz[baseline=-0.1ex]{ \node (var) {$x_{p}$}; \node [at=(var.north), xshift=-2, yshift=-1, circle, draw, fill=black, inner sep=0.25pt] {}; } e concludiamo con altro testo

\begin{tikzpicture}[>=latex']
	
	\begin{scope}[xslant=1]
		\draw [ystep=1.5,xstep=3,thin,gray] (0,0) grid (3*3,1.5*3);
		\foreach \x in {1,...,3}
		{
			\foreach \y in {1,...,3} 
			{
				\node at (\x*3-1.5,\y*1.5-0.75) [circle,fill=black,inner sep=1pt] (nodo_\x_\y) {};
				\node [ellipse,draw, minimum width=60, minimum height=30,rotate=0,gray,dashed,xslant=1] at (nodo_\x_\y) {};
			}
		}

		\draw [->] (nodo_1_3) -- (nodo_2_3);
		\draw [->] (nodo_2_3) -- (nodo_3_3);
		\draw [->] (nodo_3_3) -- (nodo_3_2);
		\draw [->] (nodo_3_2) -- (nodo_2_2);
		\draw [->] (nodo_2_2) -- (nodo_1_2);
		\draw [->] (nodo_1_2) -- (nodo_1_1);
		\draw [->] (nodo_1_1) -- (nodo_2_1);
		\draw [->] (nodo_2_1) -- (nodo_3_1);
	\end{scope}
	\node (hexacopter) [at=(nodo_2_3), yshift=50, xshift=10] {\includegraphics[scale=0.15]{../../img/hexacopterB.pdf}};
	\coordinate [at=(hexacopter),yshift=-10] (hexapin);
	\draw (hexapin) -- node[pos=1,ellipse,draw=black, minimum width=120, minimum height=70,rotate=0,dashed,xslant=1,fill=gray,opacity=0.4] {} ++(0,-1.5) coordinate(circlecenter);
	\node at (circlecenter) [circle,fill=black,inner sep=1pt] {};
 	\node [at=(nodo_1_3), yshift=7.5,xshift=7.5] {$\mathbf{p}_0$};
	\node [at=(nodo_3_1), yshift=7.5,xshift=7.5] {$\mathbf{p}_n$};
	\coordinate [at=(nodo_1_3),xshift=-60] (direction1); \coordinate [at=(nodo_1_1),xshift=-60] (direction2);
	\draw [->,line width=2] (direction1) -- node[pos=0.5,above,rotate=45]{Plane direction} (direction2);
	\coordinate [at=(circlecenter),shift=(150:1.3)] (labelA);
	\draw [<-](labelA) -- ++(150:1) -- ++(-2,0) node[above,pos=0.5]{\scriptsize{Receiver range}};

\end{tikzpicture}



% \begin{tikzpicture}[auto,node distance=10mm and 7mm, >=latex']

% 	\node [block, fill=gray!40] (hexamodel) {Hexacopter Model};
% 	\fromworkspace{parameter}{\scriptsize{Parameters}}{at=(hexamodel),xshift=-50,yshift=30}
% 	\node [sum, left=of hexamodel] (sumA) {$+$};
% 	\node [block, left=of sumA] (force) {$F_i = \dfrac{mg}{6}$};
	
% 	\node [ellipse, draw, minimum width=1.3cm, above=of force] {\scriptsize{Time}};
% 	\node [block,below=of hexamodel] (controller) {LQR Controller};
% 	\node [block, right=of controller] (integrator) {$\dfrac{1}{s}$};
% 	\fromworkspace{zattitude}{\scriptsize{$\hat{\mathbf{z}}$ attitude}}{at=(controller),yshift=-30,xshift=-50}
% 	\node [sum, right=of integrator] (sumB) {$+$};
% 	\node [block, right=of sumB, text width=2cm,align=center] (searching) {Searching Algorithm};
% 	\node [block, below=of searching, text width=2cm,align=center] (obstacle) {Obstacle Avoiding};
% 	\coordinate[at=(hexamodel),xshift=220] (intersection);
% 	\toworkspace{results}{$\mathbf{x}$}{right=of intersection};

% 	\draw [->] (force) -- (sumA);
% 	\draw [->] (sumA) -- (hexamodel);
% 	\draw [->] (hexamodel) -- (results_in);
% 	\draw [->] (searching) -- (sumB);
% 	\draw [->] (sumB) -- (integrator);
% 	\draw [->] (integrator) -- (controller);

% 	\draw [->] (controller) -| (sumA);
% 	\draw [->] (zattitude_out) -| (controller);
% 	\draw [->] (parameter_out) -| (hexamodel);
% 	\draw [->] (obstacle) -| (sumB);
% 	\draw [->] (intersection) |- (searching);
% 	\draw [->] (intersection) |- (obstacle);

% \end{tikzpicture}

% \salta

% \begin{tikzpicture}[auto,node distance=10mm and 7mm, >=latex]
% 	\inputpin{stato}{$\mathbf{x}$}{}
% 	\draw [at=(stato), xshift=50, fill=black] ++(0,0) node(muxin){} -- ++(0,2cm) -- ++(1mm,0) -- node[pos=0.2](posizione){} node[pos=0.4](velocita){} node[pos=0.6](angolo){} node[pos=0.8](velrotazione){} ++(0,-4cm) -- ++(-1mm,0) -- cycle;
% 	\node [sum, at=(posizione), xshift=50] (sumA) {$+$};
% 	\node [sum, at=(angolo), xshift=100] (sumB) {$+$};
% 	\draw [at=(stato), xshift=200+1mm, fill=black] ++(0,0) node(muxout){} -- ++(0,2cm) -- ++(-1mm,0) -- node[pos=0.2](posizioneB){} node[pos=0.4](velocitaB){} node[pos=0.6](angoloB){} node[pos=0.8](velrotazioneB){} ++(0,-4cm) -- ++(1mm,0) -- cycle;
% 	\node [gain,at=(stato.west), xshift=255, regular polygon rotate=-90] (gain) {$K$};
% 	\outputpin{controllo}{$\mathbf{u}$}{at=(stato.west), xshift=315};

% 	\inputpin{refer}{$\mathbf{x}_f$}{at=(stato.center), yshift=-80}
% 	\inputpin{attitz}{$\psi_f$}{at=(stato.center), yshift=-110}

% 	\draw [->] (stato_out) -- (muxin.center);
% 	\draw [->] (posizione.west) -- node[text width=1.5cm,align=left,pos=0.60]{\scriptsize{Position}} (sumA.west);
% 	\draw [->] (sumA.east) -- (posizioneB.west);
% 	\draw [->] (velocita.west) -- node[text width=1.5cm,align=left,pos=0.175]{\scriptsize{Velocity}} (velocitaB.west);
% 	\draw [->] (angolo.west) -- node[text width=1.5cm,align=left,pos=0.275]{\scriptsize{Attitude}} (sumB.west);
% 	\draw [->] (sumB.east) -- (angoloB.west);
% 	\draw [->] (velrotazione.west) -- node[text width=1.5cm,align=left,pos=0.175]{\scriptsize{Ang.ratio}} (velrotazioneB.west);
% 	\draw [->] (muxout.center) -- (gain);
% 	\draw [->] (gain) -- (controllo_in);

% 	\draw [->,draw=white,line width=2] (refer_out) -| (sumA.south);
% 	\draw [->,draw=white,line width=2] (attitz_out) -| (sumB.south);
% 	\draw [->] (refer_out) -| node[right,at end]{$-$} (sumA.south);
% 	\draw [->] (attitz_out) -| node[right,at end]{$-$} (sumB.south);

% \end{tikzpicture}

% \salta

% \begin{tikzpicture}[auto,node distance=10mm and 10mm, >=latex]
	
% 	\inputpin{stato}{$\mathbf{x}$}{}
% 	\node [block, right=of stato_out,fill=gray!40] (Hfield) {$\mathbf{H}\left( \mathbf{x}, \mathbf{p}_T, \hat{\mathbf{m}} \right)$};
% 	\fromworkspace{mvector}{\scriptsize{Magnetic Dipole $\hat{\mathbf{m}}$}}{at=(Hfield),xshift=-60,yshift=30,text width=2.7cm}
% 	\fromworkspace{tpos}{\scriptsize{Transmitter position $\mathbf{p}_T$}}{at=(Hfield),xshift=-60,yshift=50,text width=2.7cm}

% 	\coordinate [right=of Hfield] (intersection);
% 	\node [block, below=of intersection,text width=1cm, align=center] (absolute) {$|\mathbf{H}|$};
% 	\node [sum, below=of absolute] (prod) {$\times$};
% 	\node [block, left=of prod] (noise) {$\mathcal{N}(\mathbf{0},\Sigma)$};
% 	\node [gain, right=of prod, regular polygon rotate=-90, text width=0.3cm] (gain) {\scriptsize{SNR}};
% 	\node [sum, at=(intersection), xshift=100] (somma) {$+$};
% 	\outputpin{hvalue}{$\mathbf{H}$}{right=of somma}

% 	\draw[->] (stato_out) -- (Hfield);
% 	\draw[->] (Hfield) -- (somma);
% 	\draw[->] (somma) -- (hvalue_in);
% 	\draw[->] (intersection) -- (absolute);
% 	\draw[->] (absolute) -- (prod);
% 	\draw[->] (noise) -- (prod);
% 	\draw[->] (prod) -- (gain);
% 	\draw[->] (gain) -| (somma);
% 	\draw[->] (mvector_out) -| (Hfield);
% 	\draw[->] (tpos_out) -| (Hfield);

% \end{tikzpicture}

% \salta

% \begin{tikzpicture}[auto,node distance=10mm and 7mm, >=latex]
% 	\inputpin{stato}{$\mathbf{x}$}{}
% 	\coordinate [right=of stato_out] (intersectionA);
% 	\node [block, right=of intersectionA] (Hfield) {$\mathbf{H}$ sensor};
% 	\fromworkspace{mvector}{\scriptsize{Magnetic Dipole $\hat{\mathbf{m}}$}}{at=(Hfield),xshift=-60,yshift=30,text width=2.7cm}
% 	\fromworkspace{tpos}{\scriptsize{Transmitter position $\mathbf{p}_T$}}{at=(Hfield),xshift=-60,yshift=50,text width=2.7cm}
% 	\coordinate [right=of Hfield] (intersectionB);
% 	\node [block, right=of intersectionB] (direction){$\begin{array}{l} |\mathbf{H}| \\ \cos(\theta) \\ \sin(\theta) \end{array}$};
% 	\node [block, right=of direction] (filtering) {$\dfrac{\alpha_1 s + 1}{\beta_1 s^2 + \beta_2 s +1}$};
% 	\node [block,right=of filtering,text width=2cm,align=center] (velocity) {Exploration direction};
% 	\outputpin{velout}{$\mathbf{v}$}{right=of velocity}
% 	\node [block,below=of filtering,fill=gray!40,text width=3cm,align=center, minimum height=2cm] (emulation) {Emulation ${(\mathbf{H} - \hat{\mathbf{H}})^2 = \mathbf{0}}$};
% 	\coordinate [at=(emulation.east), yshift=15] (emulation_out1);
% 	\coordinate [at=(emulation.east), yshift=-15] (emulation_out2);
% 	\coordinate [at=(emulation.west), yshift=15] (emulation_in1);
% 	\coordinate [at=(emulation.west), yshift=-15] (emulation_in2);

% 	\toworkspace{posopt}{Optimized $\mathbf{p}_T$}{right=of emulation_out1}
% 	\toworkspace{mopt}{Optimized $\hat{\mathbf{m}}$}{right=of emulation_out2}
% 	\fromworkspace{paramV}{\scriptsize{Parameters}}{at=(velocity),xshift=-45,yshift=30}

% 	\draw [->] (mvector_out) -| (Hfield);
% 	\draw [->] (tpos_out) -| (Hfield);
% 	\draw [->] (stato_out) -- (Hfield);
% 	\draw [->] (Hfield) -- (direction);
% 	\draw [->] (direction) -- (filtering);
% 	\draw [->] (filtering) -- (velocity);
% 	\draw [->] (velocity) -- (velout_in);
% 	\draw [->] (intersectionA) |- (emulation_in2);
% 	\draw [->] (intersectionB) |- (emulation_in1);
% 	\draw [->] (emulation_out1) -- (posopt_in);
% 	\draw [->] (emulation_out2) -- (mopt_in);
% 	\draw [->] (paramV_out) -| (velocity);
% \end{tikzpicture}

% \salta

% \begin{tikzpicture}[auto,node distance=10mm and 7mm, >=latex]
% 	\inputpin{stato}{$\mathbf{x}$}{}
% 	\coordinate [right=of stato_out] (intersectionA);
% 	\node [block, right=of intersectionA,fill=gray!40] (range_finder) {Range Finder Model ${d_i}$};
% 	\fromworkspace{punti}{\scriptsize{${\Psi = [\mathbf{x}_i:i=1..M]}$}}{at=(range_finder),xshift=-60,yshift=30,text width=2cm}
% 	\fromworkspace{parametri}{\scriptsize{$[h,\,\rho]$}}{at=(range_finder),xshift=-60,yshift=50,text width=2cm}
% 	\node [block, below=of range_finder] (rotmat) {${\mathcal{R}^T(\phi,\theta,\psi)}$};
% 	\node [block, right=of range_finder] (velocita) {${\mathbf{v}_b = \sum\limits_{i=1}^{6} v(d_i) \hat{\mathbf{u}}_i}$};
% 	\node [sum, right=of velocita] (prod) {$\times$};
% 	\outputpin{velout}{$\mathbf{v}$}{right=of prod}
% 	\fromworkspace{paramV}{\scriptsize{$[p_1,\,p_2,\,p_3]$}}{at=(velocita),xshift=-45,yshift=30}

% 	\draw [->] (stato_out) -- (range_finder);
% 	\draw [->] (range_finder) -- (velocita);
% 	\draw [->] (velocita) -- (prod);
% 	\draw [->] (prod) -- (velout_in);
% 	\draw [->] (intersectionA) |- (rotmat);
% 	\draw [->] (rotmat) -| (prod);
% 	\draw [->] (punti_out) -| (range_finder);
% 	\draw [->] (parametri_out) -| (range_finder);
% 	\draw [->] (paramV_out) -| (velocita);

% \end{tikzpicture}

%\begin{tikzpicture}[auto,>=latex']
%	\coordinate (center);
%	\coordinate[at=(center.0), anchor=mid, shift=(62.05-90:0.6mm)] (pointA1);
%	\coordinate[at=(center.0), anchor=mid, shift=(153.3-90:1mm)] (pointB1);
%	\coordinate[at=(center.0), anchor=mid, shift=(260-90:1mm)] (pointC1);
%	
%	\coordinate[at=(pointA1.0), anchor=mid, shift=(0-90:15mm)] (pointA2);
%	\coordinate[at=(pointB1.0), anchor=mid, shift=(124.1-90:14.5mm)] (pointB2);
%	\coordinate[at=(pointC1.0), anchor=mid, shift=(180-90:15.5mm)] (pointC2);
%
%	\filldraw[fill=gray, draw=black] (pointA1) -- (pointA2) arc (0-90:124.1-90:15mm) -- cycle;
%	\filldraw[fill=white, draw=black] (pointB1) -- (pointB2) arc (124.1-90:180-91.5:15mm) -- cycle;
%	\filldraw[fill=gray, draw=black] (pointC1) -- (pointC2) arc (180-90:360-90:15.5mm) -- cycle;
%
%	\node[at=(pointA1.0), anchor=(0), shift=(-15:13mm)] {34\%};
%	\node[at=(pointB1.0), anchor=(0), shift=(40:13mm)] {16\%};
%	\node[at=(pointC1.0), anchor=(0), shift=(180:3mm)] {50\%};
%
%	\node[at=(pointA1.0), anchor=(180), shift=(-80:20mm), text width=2cm] {\scriptsize{2 or 3 buried person}};
%	\node[at=(pointB1.0), anchor=(180), shift=(80:20mm), text width=2cm] {\scriptsize{more than 3 buried person}};
%	\node[at=(pointC1.0), anchor=(180), shift=(140:29mm), text width=2cm] {\scriptsize{1 buried person}};
%
%\end{tikzpicture}
%
%\vspace{3cm}
%\begin{tikzpicture}[auto,node distance=1cm,>=latex']
%
%	\node[regular polygon, regular polygon sides=3, regular polygon rotate=180, draw, minimum height=1cm] (ant) {};
%	\draw (ant.north) -- (ant.south);
%	
%	\node[below of=ant] (input) {};
%\begin{scope}[node distance=4mm and 6mm]
%	\node[block, right=of input, minimum width=2.3cm, text width=2cm, align=center] (b1) {\scriptsize{Triple Antennas}};
%	\node[block, right=of b1, minimum width=2.3cm, text width=2cm, align=center] (b2) {\scriptsize{Frequency shift \\ Anti--alias filter}};
%	\node[block, below=of b2, minimum width=2.3cm, text width=2cm, align=center] (b3) {\scriptsize{A--D \\ Conversion}};
%	\node[block, below=of b3, fill=white, minimum width=2.3cm, text width=2cm, align=center] (b4) {\scriptsize{Digital Filter}};
%	\node[block, left=of b4, minimum width=2.3cm, text width=2cm, align=center] (b5) {\scriptsize{Signal \\ Detection}};
%	\node[block, left=of b5, minimum width=2.3cm, text width=2cm, align=center] (b6) {\scriptsize{H--field \\ Estimation}};
%\end{scope}
%
%	\draw[->] (ant.south) |- (b1) {};
%	\draw[->] (b1) -- (b2) {};
%	\draw[->] (b2) -- (b3) {};
%	\draw[->] (b3) -- (b4) {};
%	\draw[->] (b4) -- (b5) {};
%	\draw[->] (b5) -- (b6) {};
%	\node [at=(b3.0), anchor=(180), shift=(0:3mm)] (n1) {};
%	\node [at=(b3.0), anchor=(180), shift=(180:88mm)] (n2) {};
%	\draw [dashed] (n2) -- (b3) {};
%	\draw [dashed] (n1) -- (b3) {};
%
%	\node [at=(n2.0), anchor=(180), shift=(25:10mm)] (n1) {Analog};
%	\node [at=(n2.0), anchor=(180), shift=(-25:10mm)] (n1) {Digital};	
%\end{tikzpicture}
%
%\vspace{3cm}
%\begin{tikzpicture}[auto, node distance=2cm,>=latex']
%
%	\matrix [draw=white, row sep=0.1cm, column sep=1.5cm] {	
%	   	& \node [block, right, anchor=west, text width=1.5cm, minimum width=1.5cm] (levelD) {Level 3}; & \\
%		& \node [block, right,anchor=west, text width=1.8cm, minimum width=1.8cm] (levelC) {Level 2}; & \\
%	 	& \node [block, right,anchor=west, text width=2.1cm, minimum width=2.1cm] (levelB) {Level 1}; & \\
%		\node [input,right] (input) {}; & \node [block,anchor=west, text width=2.4cm, right, minimum width=2.4cm] (levelA) {Level 0}; & \node[output](output){} ; \\
% 	};
%
%	\draw [->] (input) -- node[below](mid) {Sensors} (levelA);
%	\draw [->] (mid) |- node {} (levelB);
%	\draw [->] (mid) |- node(midU) {} (levelC);
%	\draw [->] (mid) |- node (midUb)  {} (levelD);
%	\draw [->] (levelA) -- node[below] (midA) {Actuators} (output);
%	\draw [->] (levelB) -| node[pos=0.3] (midB) {} (midA);
%	\draw [->] (levelC) -| node[pos=0.3] (midC) {} (midB.south);
%	\draw [->] (levelD) -| node[pos=0.3] (midD) {} (midC.south);
%
%	\draw [->,dotted] (midUb.south) -- node  {} ++(0,0.8);
%	\draw [<-,dotted] (midD.south) -- node {} ++(0,0.8);
%\end{tikzpicture}
%\vspace{2cm}
%
%
%\begin{tikzpicture}[auto, node distance=2cm,>=latex']
%	\node[input] (input) {};
%	\node[block,right of=input] (perception) {Perception};
%	\node[block,right of=perception] (action) {Action};
%	\node[output, right of=action] (output) {};
%
%	\draw[->] (input) -- node[pos=0.2] {Sensors} (perception);
%	\draw[->] (perception) -- (action);
%	\draw[->] (action) -- node[pos=0.7] {Actuators} (output);
%\end{tikzpicture}
%
%\vspace{2cm}
%
%
%\begin{tikzpicture}[auto, node distance=1cm,>=latex']
%	\node [rectangle, draw=black, minimum width=6cm,minimum height=4.5cm] (envir) {};
%	\node [rectangle, draw=black, minimum width=4cm,minimum height=3.5cm] (body) at ++(0.75cm,-0.25cm) {};
%	\node [rectangle, draw=black, dashed, minimum width=2cm,minimum height=2cm] (body) at ++(1.5cm,-0.75cm) {};
%	\node [rectangle, fill=white] (situatedness) at ++(-1.25cm,-0.5cm) {$\underset{situatedness}{\longleftrightarrow}$};
%	\node [rectangle, fill=white] (embodiment) at ++(.5cm,-1.25cm) {$\underset{embodiment}{\longleftrightarrow}$};
%	\node [rectangle, fill=white, draw=black] at ++(-1.5cm,2.3cm) {\textbf{Environment}};
%	\node [rectangle, fill=white, draw=black] at ++(1.8cm,1.5cm) {\textbf{Agent}};
%	\node at(-0.6cm,1.1cm) {Body};
%	\node at(1.1cm,-0.1cm) {Mind};
%\end{tikzpicture}
%
%
%
%\vspace{2cm}
%\begin{tikzpicture}[auto, node distance=2.7cm,>=latex']
%	% EMULATION
%	\matrix[draw=black, row sep=0.1cm, column sep=0.2cm] (emulator) {
%	 \node {\scriptsize{Model}}; \\ 
%	 \node {\scriptsize{Hypothesis}};  \\
%	};
%	\node[above of=emulator] at ++(0,-1.8cm) {Emulator};
%
%	% GROUNDING
%	\matrix [draw=black,minimum width=4cm, minimum height=2.5cm, row sep=0.1cm, column sep=1cm, above of=emulator] (grounding) at ++(0,0cm) {	
%		& \node [block, right,anchor=west, minimum width=1cm ,minimum height=0.5cm] (levelC) {}; & \\
%	 	& \node [block, right,anchor=west, minimum width=1.25cm ,minimum height=0.5cm] (levelB) {}; & \\
%		\node [input,right] (input) {}; & \node [block,anchor=west, right, minimum width=1.5cm, minimum height=0.5cm] (levelA) {}; & \node[output](output){} ; \\
% 	};
%	\node[above of=grounding] at ++(0,1.5cm) {Grounding};
%
%	% EMULATOR
%	\node[block,below of=emulator] (environment) at ++(0,1.2cm) {\textbf{Environment}};
%
%
%	\draw [->] (input) -- node[below](mid) {} (levelA);
%	\draw [->] (mid) |- node (midK) {} (levelB);
%	\draw [->] (mid) |- node(midU) {} (levelC);
%	
%	\draw [->] (levelA) -- node[below] (midA) {} (output);
%	\draw [->] (levelB) -| node[pos=0.3] (midB) {} (midA);
%	\draw [->] (levelC) -| node[pos=0.3] (midC) {} (midB.south);
%
%
%	\draw [->,dotted] (mid) -- node  {} ++(0,1.8);
%	\draw [<-,dotted] (midC.south) -- node {} ++(0,0.5);
%
%	\node[right of=grounding] (gr) {};
%	\node[left of=grounding] (gl) {};
%
%	\draw [->] (emulator.west) -|  (gl.south) |- (grounding);
%	\draw [<-] (emulator.east) -|  (gr.south) |- (grounding);
%
%	\node[block,minimum width=6cm, minimum height=5.25cm,dashed] (agent) at ++(0,1.9cm) {};
%	\node[above of=agent] at ++(0,2cm) {\textbf{Agent}};
%
%	\draw [<-] (environment.east) -- ++(2cm,0) |- (grounding);
%	\draw [<-] (environment.west) -- ++(-2cm,0) |- (grounding);
%
%\end{tikzpicture}

% \vspace{3cm}
% \begin{tikzpicture}[auto,node distance=0.5cm and 1cm, >=latex', minimum width=3cm, minimum height=1cm, text width=4cm, align=center]

% 	%\draw (0,0) ellipse (2cm and 1cm) node (start) {Start};
% 	%\draw

% 	\node [ellipse, draw, minimum width=2cm, text width=2cm, fill=gray!40] (start) {Start};
% 	\node [trapezium, draw, trapezium left angle=70,trapezium right angle=-70, below=of start] (inserimento) {Receiving starting point $\mathbf{p}_0$, ending point $\mathbf{p}_n$, plane direction};
% 	\node [rectangle, draw, below=of inserimento] (generazione_punti) {Generation of points vector $\mathbf{P} = [\mathbf{p}_0,\dots,\mathbf{p}_n]$, set confidence distance $\Delta$};
% 	\node [rectangle, draw, below=of generazione_punti] (abilita_ricerca) {Start searching sensors, start radar detection routines $\Lambda(\mathbf{s}) \overset{?}{<>} \eta$ };
% 	\node [rectangle, draw, below=of abilita_ricerca] (goto_start) {$i \leftarrow 0$};
% 	\node [rectangle, draw, below=of goto_start, text width=2cm] (select_point) {Go To $\textbf{p}_i$};
% 	\node [trapezium, draw, trapezium left angle=70, trapezium right angle=-70, below=of select_point,text width=1.2cm] (read_position) {Get $\mathbf{x}$};
% 	\node [diamond, draw, aspect=2, text width=2.3cm, below=of read_position] (distanza) {$\left| \mathbf{p}_i - \mathbf{x} \right| < \Delta$ ?};
% 	\node [diamond, draw, aspect=2, text width=2cm, below=of distanza] (lastpoint) {$i = n$ ?};
% 	\node [ellipse, draw, minimum width=2cm, text width=2cm, below=of lastpoint,fill=gray!40] (stop) {Stop};

% 	\node [rectangle,draw,left=of lastpoint, text width=1.5cm] (addone) { $i \leftarrow i+1$ };
% 	\coordinate [at=(select_point.north), shift=(0:22mm)] (braces_a);
% 	\coordinate [at=(distanza.south), shift=(0:22mm)] (braces_b);
% 	\draw [decorate,decoration={brace,amplitude=12pt}] (braces_a) -- (braces_b) {};

% 	\node [diamond, draw, aspect=2, text width=2cm, at=(read_position.north east), shift=(0:50mm)] (detection) {$\Lambda(\mathbf{s}) > \eta$?};
% 	\node [rectangle, draw,fill=gray!40, text width=2.5cm, below=of detection] (search) {Search \mbox{H--field} source};

% 	\coordinate [at=(detection.north), shift=(90:5mm)] (extraA);
% 	\coordinate [at=(search.south), shift=(270:5mm)] (extraB);
% 	\coordinate [at=(detection.west), shift=(180:5mm)] (extraC);
% 	\coordinate [at=(distanza.west), shift=(180:10mm)] (intraB);

% 	\draw [->] (start) -- (inserimento);
% 	\draw [->] (inserimento) -- (generazione_punti);
% 	\draw [->] (generazione_punti) -- (abilita_ricerca);
% 	\draw [->] (abilita_ricerca) -- (goto_start);
% 	\draw [->] (goto_start) -- coordinate[pos=0.5](intraA) (select_point);
% 	\draw [->] (select_point) -- (read_position);
% 	\draw [->] (read_position) -- (distanza);
% 	\draw [->] (distanza) -- node[shift=(0:-17mm)]{\scriptsize{true}} (lastpoint);
% 	\draw [->] (lastpoint) -- node[shift=(0:-17mm)]{\scriptsize{true}} (stop);
% 	\draw [->] (detection) -- node[shift=(0:-17mm)]{\scriptsize{true}} (search);
% 	\draw [->] (lastpoint) -- node[shift=(45:3mm)]{\scriptsize{false}} (addone);

% 	\draw [->,dashed] (extraA) -- (detection);
% 	\draw [->,dashed] (search) -- (extraB);
% 	\draw [->,dashed] (detection) -- node[shift=(45:3mm)]{\scriptsize{false}} (extraC);

% 	\draw [->] (addone) |- (intraA);
% 	\draw (distanza) -- node[shift=(45:3mm)]{\scriptsize{false}} (intraB) |- (intraA);

% \end{tikzpicture}

% \newcommand{\drawcube}[9]{%
% 	\coordinate (#7_A) at (#1,#2,#3);%
% 	\coordinate (#7_B) at (#1+#4,#2,#3);%
% 	\coordinate (#7_C) at (#1+#4,#2+#5,#3);%
% 	\coordinate (#7_D) at (#1,#2+#5,#3);%
% 	\coordinate (#7_E) at (#1+#4,#2,0);%
% 	\coordinate (#7_F) at (#1+#4,#2+#5,0);%
% 	\coordinate (#7_G) at (#1,#2+#5,0);%
% 	%
% 	\filldraw [draw=black, fill=#6] (#7_A) -- (#7_B) -- (#7_C) -- (#7_D) -- cycle;%
% 	\filldraw [draw=black, fill=#6] (#7_B) -- (#7_C) -- (#7_F) -- (#7_E) -- cycle;%
% 	\filldraw [draw=black, fill=#6] (#7_D) -- (#7_C) -- (#7_F) -- (#7_G) -- cycle;%
% 	\node [#9] at (0.5*#4+#1,0.5*#5+#2,#3) {#8};%
% }

% \newcommand{\drawplanezy}[8]{%
% 	\coordinate (#5_A) at (#1,#2,#3);%
% 	\coordinate (#5_B) at (#1,#2,0);%
% 	\coordinate (#5_C) at (#1,#2+#4,0);%
% 	\coordinate (#5_D) at (#1,#2+#4,#3);%
% 	\draw [#6] (#5_A) -- (#5_B) -- (#5_C) -- (#5_D) -- cycle;%
% 	\node [#8] at (#1,#2+#4-0.4,0.5*#3) {#7};%
% }

% \newcommand{\drawplanexy}[7]{%
% 	\coordinate (#7_A) at (#1,#2,#3);%
% 	\coordinate (#7_B) at (#1+#4,#2,#3);%
% 	\coordinate (#7_C) at (#1+#4,#2+#5,#3);%
% 	\coordinate (#7_D) at (#1,#2+#5,#3);%
% 	\draw [#6] (#7_A) -- (#7_B) -- (#7_C) -- (#7_D) -- cycle;%
% }


% \begin{tikzpicture}[>=latex']
% 	\drawplanexy{-0.3}{-0.3}{-0.3}{6.7}{10}{dashed}{perception}
% 	\node [at=(perception_D),xshift=30,yshift=-10] {\textbf{Perception}};
% 	\drawcube{0}{0}{5}{6.4}{1}{white}{dinamica}{Dynamics and control}{};
% 	\drawcube{0}{1.2}{5}{6.4}{1}{white}{tracking}{Tracking Problem}{};
	
% 	\drawcube{0}{2.4}{5}{6.4}{1}{white}{ostacoli}{Obstacle Avoidance}{};
% 	\drawcube{0}{3.6}{5}{6.4}{1}{white}{altitude}{Altitude Keeping}{};
	
% 	\drawcube{0}{4.8}{5}{3}{1.5}{white}{source}{Source searching}{text width=2cm,align=center};
% 	\drawcube{0}{6.5}{5}{3}{1.5}{white}{emulatore}{Emulation}{text width=2cm,align=center};

% 	\drawplanezy{3.2}{4.8}{5}{4.5}{radar_det}{fill=white,opacity=0.90}{Radar detect}{rotate=45,xslant=1};

% 	\drawcube{3.4}{4.8}{5}{3}{3.2}{white}{alpha}{Exploration routines}{text width=2cm,align=center};
% 	\drawplanexy{-0.3}{-0.3}{5.3}{6.7}{10}{dashed}{action}
% 	\node [at=(action_D),xshift=20,yshift=-10] {\textbf{Action}};

% 	\draw [->,line width=1.5] (action_D) -- ++(0,0,2);
% 	\draw [->,line width=1.5] (perception_D) -- ++(0,0,2);

% 	\coordinate [at=(radar_det_D), yshift=-20] (arrows_point);
% 	\draw [->,dashed]  (arrows_point) -- ++(1.5,0,0); 
% 	\draw [->,dashed]  (arrows_point) -- ++(-1.5,0,0); 
% \end{tikzpicture}

% \vspace{2cm}

% \begin{tikzpicture}[>=latex',scale=0.4]
% 	\drawplanexy{-0.3}{-0.3}{-0.3}{6.7}{10}{dashed}{perception}
	
% 	\drawcube{0}{0}{5}{6.4}{1}{white}{dinamica}{}{};
% 	\drawcube{0}{1.2}{5}{6.4}{1}{white}{tracking}{}{};
	
% 	\drawcube{0}{2.4}{5}{6.4}{1}{white}{ostacoli}{}{};
% 	\drawcube{0}{3.6}{5}{6.4}{1}{white}{altitude}{}{};
	
% 	\drawcube{0}{4.8}{5}{3}{1.5}{white}{source}{}{};
% 	\drawcube{0}{6.5}{5}{3}{1.5}{white}{emulatore}{}{};

% 	\drawplanezy{3.2}{4.8}{5}{4.5}{radar_det}{fill=white,opacity=0.90}{}{};

% 	\drawcube{3.4}{4.8}{5}{3}{3.2}{white}{alpha}{}{};
% 	\drawplanexy{-0.3}{-0.3}{5.3}{6.7}{10}{dashed}{action}
	

% 	\draw [->,line width=1.5] (action_D) -- ++(0,0,2);
% 	\draw [->,line width=1.5] (perception_D) -- ++(0,0,2);

% 	\coordinate [at=(radar_det_D), yshift=-5] (arrows_point);
% 	\draw [->,dashed]  (arrows_point) -- ++(1.5,0,0); 
% 	\draw [->,dashed]  (arrows_point) -- ++(-1.5,0,0); 
% \end{tikzpicture}

\end{document}